/* Reset + base */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; font-family: system-ui, 'Prompt', sans-serif; background: #0b0b0b; color: #f5f5f5; }
h1,h2 { margin: 0 0 .5rem 0; }
label { display:block; margin: .75rem 0 .25rem; font-weight: 600; }
input, button, textarea { font: inherit; }

.topbar {
  background: linear-gradient(90deg, #111, #222, #111);
  padding: .8rem 1rem;
  border-bottom: 1px solid #333;
  display:flex; align-items:center; justify-content:space-between;
}
.status { font-size:.9rem; opacity:.8; }

.layout { display:grid; grid-template-columns: 360px 1fr; min-height: calc(100vh - 60px); }
@media (max-width: 900px){ .layout { grid-template-columns: 1fr; } }

.editor { padding: 1rem; background: #121212; border-right: 1px solid #232323; }
.options { display:flex; gap:.5rem; flex-wrap: wrap; }
.options button {
  background:#1c1c1c; border:1px solid #333; padding:.5rem .7rem; border-radius:.6rem; color:#ddd; cursor:pointer;
}
.options button.selected { outline:2px solid #f7d25b; border-color:#f7d25b; }
.options.multi button::after{ content:" +"; opacity:.4; }

.actions { display:flex; gap:.5rem; margin-top: .8rem; }
button.primary { background:#f7d25b; color:#111; border:1px solid #f7d25b; }
button.danger { background:#2a1717; color:#ffb3b3; border:1px solid #442222; }
button { border-radius:.6rem; padding:.55rem .9rem; }

.advanced { margin-top: 1rem; }
.advanced textarea { width:100%; min-height: 120px; background:#0e0e0e; color:#ddd; border:1px solid #333; padding:.6rem; border-radius:.6rem; }

.hint { font-size:.9rem; opacity:.8; margin-top:.75rem; }

/* River scene */
.river-wrap { position:relative; overflow:hidden; background:#000; }
.river-bg {
  position:absolute; inset:0; z-index:0;
  background:
    radial-gradient(1200px 500px at 50% 120%, rgba(255,225,120,.10), transparent 60%),
    radial-gradient(800px 400px at 20% 100%, rgba(255,255,255,.05), transparent 60%),
    linear-gradient(#0a0a0a, #121212 25%, #0a0a0a);
}
.river {
  position:relative; z-index:1; height: calc(100vh - 60px);
  perspective: 900px;
  overflow:hidden;
}
/* subtle water ripples */
.river::before, .river::after {
  content:""; position:absolute; inset:-20%;
  background:
    repeating-linear-gradient( -5deg, rgba(255,255,255,.05), rgba(255,255,255,.05) 2px, transparent 3px, transparent 8px ),
    repeating-linear-gradient( 6deg, rgba(255,215,100,.06), rgba(255,215,100,.06) 2px, transparent 3px, transparent 8px );
  animation: ripple 16s linear infinite;
  mix-blend-mode: screen; opacity:.10;
}
.river::after { animation-duration: 23s; opacity:.08; }
@keyframes ripple { from { transform: translateX(0);} to { transform: translateX(-200px);} }

/* Krathong */
.krathong {
  position:absolute; bottom: 12%;
  transform-style: preserve-3d;
  will-change: transform, opacity;
}
.krathong .base {
  width: 180px; height: 55px; border-radius: 50%/60% 60% 40% 40%;
  background: conic-gradient(from 180deg, var(--baseA), var(--baseB));
  box-shadow: inset 0 8px 16px rgba(0,0,0,.25), 0 6px 18px rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.07);
}
.krathong .decor.flowers, .krathong .decor.candles { position:absolute; inset:0; pointer-events:none; }
.krathong .decor.flowers .flower {
  position:absolute; width: 18px; height: 18px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff, var(--color) 60%, #000 100%);
  transform: translate(-50%,-50%);
  filter: saturate(1.1);
}
.krathong .decor.candles .candle {
  position:absolute; width: 4px; height: 18px; background: #f1e6c9; border-radius: 2px;
  box-shadow: inset 0 0 3px rgba(0,0,0,.3);
}
.krathong .decor.candles .flame {
  position:absolute; width: 10px; height: 16px; border-radius: 50% 50% 45% 45%;
  background: radial-gradient(circle at 50% 20%, #fff9c4, #ffd54f 60%, rgba(255,140,0,.4) 100%);
  transform: translate(-3px,-12px);
  animation: flicker .18s infinite alternate ease-in-out;
  filter: drop-shadow(0 0 6px rgba(255,200,80,.9));
}
@keyframes flicker { from { transform: translate(-3px,-12px) scale(.98);} to { transform: translate(-2px,-13px) scale(1.04);} }
.krathong .wish {
  position:absolute; left:50%; top:-8px; transform: translateX(-50%);
  font-size:.9rem; color:#fff4c2; text-shadow: 0 1px 2px rgba(0,0,0,.8);
  white-space:nowrap; max-width: 220px; overflow:hidden; text-overflow: ellipsis;
}
.krathong .glow {
  position:absolute; left:50%; top: 10px; transform: translateX(-50%);
  width: 220px; height: 80px; border-radius: 50%;
  background: radial-gradient(50% 50% at 50% 30%, rgba(255,208,90,.25), transparent 70%);
  filter: blur(6px); pointer-events:none;
}

/* Float animation preset */
@keyframes floatLeft {
  0%   { transform: translate3d(var(--xStart), var(--y), var(--z)) rotateZ(var(--r)) scale(var(--s)); opacity: 0; }
  5%   { opacity: 1; }
  95%  { opacity: 1; }
  100% { transform: translate3d(calc(var(--xStart) - 120vw), var(--y), var(--z)) rotateZ(calc(var(--r) + -2deg)) scale(calc(var(--s) * .9)); opacity: 0; }
}

/* Preview panel for small screens */
@media (max-width: 900px){
  .river { height: 60vh; }
}
